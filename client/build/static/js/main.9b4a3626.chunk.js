(this.webpackJsonpmern=this.webpackJsonpmern||[]).push([[0],{25:function(e,t,a){e.exports=a(54)},48:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(23),r=a.n(s),o=a(13),c=a(1),i=a(10);var m=function(){return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary"},l.a.createElement("p",{className:"navbar-brand"},"Google Books"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},l.a.createElement("ul",{className:"navbar-nav mr-auto"},l.a.createElement("li",{className:"nav-item active"},l.a.createElement("a",{className:"nav-link",href:"/"},"Search")),l.a.createElement("li",{className:"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/saved"},"Saved")))))};var u=function(){return l.a.createElement("div",{className:"jumbotron jumbotron-fluid bg-secondary text-white"},l.a.createElement("span",{className:"lead"},"Find and save your favorite books"))},d=a(8),h=a.n(d),v=function(e){return h.a.get("https://www.googleapis.com/books/v1/volumes?q="+e)},E=function(){return h.a.get("/api/books")},p=function(e){return h.a.post("/api/books/",e)},b=function(e){return h.a.delete("/api/books/"+e)};var f=function(e){return e.href?l.a.createElement("button",{className:"btn btn-outline-dark btn-lg btn-block"},l.a.createElement("a",{href:e.href},e.children)):e.onClick?l.a.createElement("button",{className:"btn btn-primary btn-lg btn-block",onClick:e.onClick,"data-id":e.id},e.children):void 0};var k=function({title:e,link:t,id:a,author:n,image:s,synopsis:r,saveBook:o,deleteBook:c}){return o?l.a.createElement("div",{id:"result-card"},l.a.createElement("div",{className:"row text-center",id:"result-header"},l.a.createElement("div",{className:"col-3"},l.a.createElement("h4",null,e),l.a.createElement("small",null,l.a.createElement("br",null),"Written By:",l.a.createElement("br",null),n)),l.a.createElement("span",{className:"col-3 offset-6"},l.a.createElement(f,{href:t},"View"),l.a.createElement(f,{id:a,onClick:e=>o(e)},"Save"))),l.a.createElement("div",{className:"row"},l.a.createElement("hr",null)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-3 text-center"},l.a.createElement("img",{src:s,alt:e})),l.a.createElement("div",{className:"col-9"},l.a.createElement("p",{className:"lead"},"synopsis: "),r))):l.a.createElement("div",{id:"result-card"},l.a.createElement("div",{className:"row text-center",id:"result-header"},l.a.createElement("div",{className:"col-3"},l.a.createElement("h4",null,e),l.a.createElement("small",null,l.a.createElement("br",null),"Written By:",l.a.createElement("br",null),n)),l.a.createElement("span",{className:"col-3 offset-6"},l.a.createElement(f,{href:t},"View"),l.a.createElement(f,{id:a,onClick:e=>c(e)},"Delete"))),l.a.createElement("div",{className:"row"},l.a.createElement("hr",null)),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-3 text-center"},l.a.createElement("img",{src:s,alt:e})),l.a.createElement("div",{className:"col-9"},l.a.createElement("p",{className:"lead"},"Synopsis: "),r)))};var g=function(e){return l.a.createElement("div",{id:"search-form",className:"text-center"},l.a.createElement("input",{className:"form-control",name:"title",placeholder:"Search for a book...",type:"text",onChange:e.handleInputChange}),l.a.createElement("br",null),l.a.createElement("button",{className:"btn btn-block btn-primary",onClick:e.handleFormSubmit,type:"submit"},"   Search!"))};class N extends n.Component{constructor(...e){super(...e),this.state={books:[],results:[],title:""},this.handleInputChange=e=>{const t=e.target,a=t.name,n=t.value;this.setState({[a]:n})},this.handleFormSubmit=e=>{e.preventDefault(),v(this.state.title).then(e=>{this.setState({results:e.data.items})}).catch(e=>{throw e})},this.handleSaveBook=e=>{e.preventDefault();const t=e.target.getAttribute("data-id"),a=Object(i.a)({},this.state);let n=this.state.results.filter(e=>e.id===t);const l={title:n[0].volumeInfo.title,authors:n[0].volumeInfo.authors,synopsis:n[0].volumeInfo.synopsis,image:n[0].volumeInfo.imageLinks.thumbnail,link:n[0].volumeInfo.infoLink};this.state.books[t]?console.log("You've already saved that book."):(a.books[t]=l,this.setState(a),console.log("Updated this.state:",this.state.books),p({title:n[0].volumeInfo.title,authors:n[0].volumeInfo.authors,synopsis:n[0].volumeInfo.synopsis,image:n[0].volumeInfo.imageLinks.thumbnail,link:n[0].volumeInfo.infoLink}))}}componentDidMount(){E().then(e=>{this.setState({books:e.data}),console.log("books:",this.state.books)}).catch(e=>{throw e})}render(){return l.a.createElement("div",null,l.a.createElement(m,null),l.a.createElement(u,null),l.a.createElement("div",{className:"container"},l.a.createElement(g,{handleFormSubmit:this.handleFormSubmit,handleInputChange:this.handleInputChange}),l.a.createElement("div",{className:"container-fluid",id:"main-content"},this.state.results.map(e=>l.a.createElement(k,{key:e.id,title:e.volumeInfo.title,id:e.id,link:e.volumeInfo.infoLink,author:e.volumeInfo.authors,image:e.volumeInfo.imageLinks.thumbnail,synopsis:e.volumeInfo.synopsis,saveBook:this.handleSaveBook})))))}}var y=N;class S extends n.Component{constructor(...e){super(...e),this.state={results:[]},this.handleDeleteBook=e=>{e.preventDefault();const t=e.target.getAttribute("data-id"),a=Object(i.a)({},this.state);a.results=this.state.results.filter(e=>e._id!==t),b(t).then(e=>{this.setState(a),console.log(e)}).catch(e=>{console.log(e)})}}componentDidMount(){E().then(e=>{this.setState({results:e.data}),console.log("results:",this.state.results)}).catch(e=>{throw e})}render(){return l.a.createElement("div",null,l.a.createElement(m,null),l.a.createElement(u,null),l.a.createElement("div",{className:"container"},l.a.createElement("h3",null,"Your Saved Books"),l.a.createElement("div",{className:"container-fluid",id:"main-content"},this.state.results.map(e=>l.a.createElement(k,{key:e._id,title:e.title,id:e._id,link:e.link,author:e.authors,image:e.image,synopsis:e.synopsis,deleteBook:this.handleDeleteBook})))))}}var I=S;a(48);class w extends n.Component{render(){return l.a.createElement(o.a,null,l.a.createElement("div",null,l.a.createElement(c.c,null,l.a.createElement(c.a,{exact:!0,path:"/",component:y}),l.a.createElement(c.a,{exact:!0,path:"/saved",component:I}))))}}var C=w;r.a.render(l.a.createElement(C,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.9b4a3626.chunk.js.map